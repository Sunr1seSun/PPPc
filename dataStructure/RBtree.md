#### 定义

- 每个节点是红色或是黑色。
- 根和叶子节点都是黑色。
- 如果一个节点是红色，它的孩子是黑色。
- 从一个节点到它的叶子经过相同数量的黑色节点。

#### rotation

```
右旋
     a
    / \
   b   e
  / \
 d   c
右旋时，需要考虑的孩子节点有d,c,e。
右旋后，d,e还在原来的位置不变，将c转换为a的左子节点。
   b
  / \
 d   a
    / \
   c   e
操作：
1、保存b
2、移动c
3、移动a
b是新的根。
```

#### 插入

##### 调整树

策略：

- 插入节点，将它标记为红色。
- 修复树。

插入时四种情况

- 插入的节点是根：染黑
- 插入节点的叔叔是红色：父辈变黑，祖父辈变红。
- 插入节点的叔叔是黑色 && 三角形：转换父亲为直线型，要处理的违规变成原父亲（现在是孩子）
- 插入节点的叔叔是黑色 && 直线型：父亲变黑，祖父变红，转换祖父。

##### 插入节点

1、找到要插入的位置（找到父节点）

2、

- 父亲不为空
  - 做左孩子
  - 做右孩子
- 父亲为空
  - 做父亲

3、调整树。

#### 删除

1、找到要删除的节点

2、

第一步：

- 左右孩子都为空：直接删除。
- 左孩子为空或右孩子为空：用另一方做替身。
- 左右孩子都不为空：用前驱或后继做替身。

第二步：x = 替身孩子，x->parent = 替身父亲，替身父亲的孩子 = x

第三步：把替身的值交给要删除的节点。

第四步：修复树

总结：找一个替身作为被删除的节点，自己保存替身的内容。